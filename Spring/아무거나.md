Spring은 객체를 json으로 변환하는 라이브러리를 기본적으로 jackson으로 함.

## 개발 순서

1. 비즈니스 요구사항 정리

    - 데이터 : 어떤 데이터를 다룰 것인가
    - 기능 : 어떤 기능이 있을 것인가
    - 데이터 저장소 선정 : 어떤 DB를 쓸 것인가

2. 도메인과 레포지토리 만들기
3. 레포지토리 테스트 케이스 작성
4. 서비스 개발
5. 서비스 테스트

## 웹 애플리케이션 계층 구조

- 컨트롤러 : 웹 MVC의 컨트롤러 역할
- 서비스 : 핵심 비즈니스 로직 구현
- 레포지토리 : 데이터베이스에 접근, 도메인 객체를 DB에 저장하고 관리
- 도메인 : 비즈니스 도메인 객체, 예) 회원, 주문, 쿠폰 등등 주로 데이터베이스에 저장하고 관리됨

## 레포지토리 테스트 케이스 작성

**테스트 하는 방법**

1. 자바 main 메서드로 실행
2. 웹 애플리케이션의 컨트롤러로 실행

-> 근데 너무 오래 걸리고 여러 테스트를 한꺼번에 못 하고 반복해서 못 함. 단점 투성이다.

3. **JUnit 프레임워크로 테스트 실행**

## 테스트 할 때 주의점

테스트 하는 순서는 보장되지 않는다.

그래서 테스트 하나가 끝나면 해당 테스트에서 사용한 데이터를 클리어해주어야함.

## 스프링 빈 등록

스프링 빈 등록 시 두 가지 방법이 있다.

1. 컴포넌트 스캔
2. 자바 코드로 직접 등록

Application이 포함된 패키지의 하위 폴더들만 스캔한다.

스프링은 스프링 컨테이너에 스프링 빈을 등록할 때 **싱글톤**으로 등록한다. 

> 싱글톤 : 유일하게 하나만 등록해서 공유한다.

따라서 같은 스프링 빈이면 모두 같은 인스턴스임.

(설정으로 다르게 할 수 있지만 거의 대부분 싱글톤을 쓴다.)


## 스프링 빈 직접 등록하기

- @Configuration : 스프링이 실행될 때 해당 어노테이션으로 아! 여기 있는 걸 빈으로 등록해야지~ 한다.
- @Bean : 해당 어노테이션의 로직을 통해 (return) 객체를 빈으로 등록한다.

```java
@Configuration
public class SpringConfig {

    @Bean
    public MemberService memberService() {
        return new MemberService(memberRepository());
    }

    @Bean
    public MemberRepository memberRepository() {
        return new MemoryMemberRepository():
    }
}
```

## DI의 3가지 방법

1. 생성자 주입 : 생성자로 주입. 롬복의 `@RequiredArgsConstructor`로 하면 개꿀
2. 필드 주입 : `@Autowired private final ~~~;` (별로임)
3. setter 주입 : 퍼블릭하게 정의되서 누가 바꾸면 클남.

생성 시점 이후에 동적으로 변경하지 못 하게 하는게 좋다. 사실 이런 상황이 없다.

그래서 생성자 주입이 좋다.